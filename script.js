const questions = [{
    question: "酒々井の教室で人が倒れています。",
    answers: {
      "1": { text: "病体を診る", score: { A: 1 } },
      "2": { text: "周りの人に協力を求める。", score: { E: 1 } }
    }
  },
  {
    question: "交際を求められました。",
    answers: {
      "1": { text: "その場の勢い", score: { C: 1 } },
      "2": { text: "慎重に将来まで考える", score: { G: 3 } }
    }
  },
  {
        "question": "あなたは酒々井の田んぼにいます。目の前にゴミが落ちていました。",
        "answers": {
            "1": {"text": "ガン無視", "score": {"B": 1}},
            "2": {"text": "拾う", "score": {"F": 1}}
        }
  },
    {
        "question": "あなたは通路でペットボトル野球をしている少年たちと出くわしました。",
        "answers": {
            "1": {"text": "注意する", "score": {"D": 1}},
            "2": {"text": "微笑みつつ横を通過する", "score": {"H": 1}}
        }
    },
    {
        "question": "あなたは新食堂にいます。すると、友達が一人でごはんを食べていました。",
        "answers": {
            "1": {"text": "心の中で挨拶をする", "score": {"D": 1}},
            "2": {"text": "声をかける", "score": {"H": 3}}
        }
    },
    {
        "question": "順天堂大学一年生の学年ラインで、アイコンが変更したことを報告した人がいました。",
        "answers": {
            "1": {"text": "そのコメントにリアクションをする", "score": {"D": 3}},
            "2": {"text": "何もなかったかのように扱う", "score": {"D": 1}},
            "3": {"text": "退会させる", "score": {"H": 1}}
        }
    },
    {
        "question": "テスト期間中に三号館のテントを利用しようとしていました。しかし、先客が荷物だけおいて占領していました。",
        "answers": {
            "1": {"text": "荷物を押しのけて利用する", "score": {"E": 3}},
            "2": {"text": "悪質さをSNSに投稿する","score": {"E": 3}},
            "3": {"text": "あきらめる", "score": {"A": 1}}
        }
    },
    {
        "question": "あなたが順天堂大学さくらキャンパスで歩いていると、目の前で親友の女の子が、二人組の男に執拗に言い寄られていました。",
        "answers": {
            "1": {"text": "ネタになると冷笑する", "score": {"H": 3}},
            "2": {"text": "すかさず助けに行く", "score": {"D": 1}},
            "3": {"text": "横を通り過ぎる", "score": {"H": 1}}
        }
    },
    {
        "question": "昼休み中、あなたは髪色がおかしい同級生が学外に歩いていくのを目撃しました。",
        "answers": {
            "1": {"text": "後をつけてみる", "score": {"G": 3}},
            "2": {"text": "友達と噂話をする", "score": {"C": 1}},
            "3": {"text": "気にも留めない", "score": {"G": 1}}
        }
    },
    {
        "question": "あなたは希望していない実習に配属されてしまいました。",
        "answers": {
            "1": {"text": "学外へ消えていく", "score": {"G": 1}},
            "2": {"text": "帽子を持参して寝る", "score": {"G": 3}}
        }
    },
    {
        "question": "あなたはある部活動に参加しています。すると、個性的でチームになじめていないチームメイトが現れました。",
        "answers": {
            "1": {"text": "普通に接する", "score": {"E": 1}},
            "2": {"text": "退部する", "score": {"E": 3}},
            "3": {"text": "チームメイトとして守る", "score": {"A": 3}}
        }
    },
    {
        "question": "あなたは啓心寮に住んでいます。すると同級生が大浴場に立てこもる事件が発生しました。",
        "answers": {
            "1": {"text": "失望する", "score": {"C": 1}},
            "2": {"text": "チクる", "score": {"G": 1}},
            "3": {"text": "一緒に立てこもる", "score": {"G": 3}}
        }
    },
    {
        "question": "入学後すぐあなたの友達が一限に遅れてきました",
        "answers": {
            "1": {"text": "注意する", "score": {"G": 1}},
            "2": {"text": "大声で叫ぶ", "score": {"G": 3}},
            "3": {"text": "失望する",  "score": {"C": 1}}
        }
    },
    {
        "question": "12/24（水）になりました",
        "answers": {
            "1": {"text": "授業に出席する", "score": {"F": 1}},
            "2": {"text": "出席しない", "score": {"B": 1}},
            "3": {"text": "25日も欠席する", "score": {"B": 3}}
        }
    },
    {
        "question": "勉強していない試験範囲があることに気が付きました。しかし、あなたは友達と遊ぶ約束をしています。",
        "answers": {
            "1": {"text": "友達と遊びに行った後に勉強する", "score": {"B": 1}},
            "2": {"text": "友達との約束を断る", "score": {"F": 1}},
            "3": {"text": "勉強せずに試験に臨む", "score": {"B": 3}}
        }
    },
    {
        "question": "寮生活を楽しんでいますか。",
        "answers": {
            "1": {"text": "はい", "score": {"D": 1}},
            "2": {"text": "いいえ", "score": {"H": 1}}
        }
    },
    {
        "question": "どれが大切ですか。",
        "answers": {
            "1": {"text": "お金", "score": {"E": 1}},
            "2": {"text": "友達", "score": {"A": 1}},
            "3": {"text": "自分", "score": {"A": 3}}
        }
    },
    {
        "question": "一週間に一度話す程度の友達がラインでご飯に誘ってきました。あなたは最近忙しいです。",
        "answers": {
            "1": {"text": "行く", "score": {"D": 1}},
            "2": {"text": "行かない", "score": {"H": 1}}
        }
    },
    {
        "question": "あなたには彼氏、または彼女がいます。部活の異性の先輩に複数人でのご飯に誘われました。",
        "answers": {
            "1": {"text": "報告せずに行く", "score": {"C": 1}},
            "2": {"text": "報告するけど行く", "score": {"G": 1}}
        }
    },
    {
        "question": "ラーニングコモンズは何をする場所ですか？",
        "answers": {
            "1": {"text": "勉強", "score": {"B": 1}},
            "2": {"text": "寝る", "score": {"F": 1}},
            "3": {"text": "利用したことがない", "score": {"F": 3}}
        }
    },
    {
        "question": "あなたはどれくらいの頻度で夜の寮から姿を消しますか？（帰省含む）",
        "answers": {
            "1": {"text": "ほぼ毎日", "score": {"B": 3}},
            "2": {"text": "週に２，３日", "score": {"B": 1}},
            "3": {"text": "毎日寮にいる", "score": {"F": 1}}
        }
    },
    {
        "question": "あなたは、さくら自動車学校に着きました。あまりの長蛇の列に巻き込まれています。",
        "answers": {
            "1": {"text": "イライラしてしまう", "score": {"H": 3}},
            "2": {"text": "周りの人とおしゃべり", "score": {"D": 1}},
            "3": {"text": "冷静を保つ", "score": {"H": 1}}
        }
    },
    {
        "question": "あなたはサッカー部に所属しています。一週間後に大会を控えています。",
        "answers": {
            "1": {"text": "今日から準備運動を行う", "score": {"G": 3}},
            "2": {"text": "部活がある日のみ体をうごかす", "score": {"C": 1}},
            "3": {"text": "体調管理を優先する", "score": {"G": 1}}
        }
    },
    {
        "question": "テスト勉強はいつから始めますか？",
        "answers": {
            "1": {"text": "2週間前", "score": {"C": 1}},
            "2": {"text": "1週間前", "score": {"G": 1}},
            "3": {"text": "直前", "score": {"G": 3}}
        }
    },
    {
        "question": "あなたは前期のテストで大失敗し、単位を落としてしまいました。",
        "answers": {
            "1": {"text": "大丈夫だと信じて自信を失わない", "score": {"A": 1}},
            "2": {"text": "やる気がなくなる", "score": {"E": 1}},
            "3": {"text": "おかしいと訴える", "score": {"E": 3}}
        }
    },
    {
        "question": "再試になっている人について。",
        "answers": {
            "1": {"text": "情けない。", "score": {"C": 1}},
            "2": {"text": "明日はわが身。", "score": {"G": 1}},
            "3": {"text": "助けてください。", "score": {"G": 3}}
        }
    },
    {
        "question": "あなたの酒々井での休日の過ごし方を教えてください",
        "answers": {
            "1": {"text": "外出", "score": {"B": 1}},
            "2": {"text": "ほとんど学校内で過ごす", "score": {"F": 3}},
            "3": {"text": "帰省", "score": {"F": 1}}
        }
    },
    {
        "question": "友達から相談を受けました。",
        "answers": {
            "1": {"text": "友達の相談にそのまま受け取る","score": {"E": 1}},
            "2": {"text": "相談の裏側まで思考の範囲を広げる", "score": {"A": 1}},
            "3": {"text": "聞き流す", "score": {"E": 3}}
        }
    }
];

const typeDescriptions = {  "ABCD": "外交的で、広い心で責任感の強いあなたには軍医も選択肢の１つ！！立派な軍医になれる素質があります！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。友達と遊ぶのが大好きな反面、しっかりと計画に沿って勉強を進めることができるあなたは、好きなように過ごしてください。頑張ってください。監修陣を救ってください。",
  "ABCH": "物事を冷静に洞察し、計画的にこなすあなたは、スポーツドクターが選択肢の１つ！！立派なスポーツドクターになれる素質があります！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。外交的で周りから人気者のあなたは、少しネガティブな一面があるようです。少しの失敗でも、前を向いて授業に向かって行ってください。応援しています。",
  "ABGD": "冷静さと、人当たりの良さを持ち合わせるあなたは、小児科も選択肢の１つ！！立派な小児科になれる素質があります。ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。ポジティブさにあふれているあなたは、計画性が欠如しているようです。ですから、授業中に学んだ内容は即日復習し、しっかりコツコツと学習を進めていきましょう。",
  "ABGH": "外交的で、論理的に物事を考えられるあなたは、総合診療科がおすすめです。立派な総合診療科になれる素質があります。ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。周囲から頼りにされているあなたは、すこし無計画でネガティブな一面があるようです。自己肯定感をより高めるために、授業が始まったら日々計画を立てる癖をつけてみるのはいかがでしょうか。",
    "AFCD": "話し合いで、冷静な目線で状況を判断できるあなたは周囲からも一目置かれる存在です。そんなあなたには、救急科がおすすめでしょう！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。自分の時間を大切にしているあなたは、よくお友達から遊びに誘われることでしょう。あなたは学業をそつなくこなせますから、ぜひお友達も大切に有意義な時間を過ごしてください。では、いってらっしゃい！",
    "AFCH": "論理性と計画性を持ち合わせるあなたは、外科に向いています！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。落ち着いて見えるあなたは、すこし自己主張が乏しい印象を与えてしまうときがあるようです。前期でも好成績を残しているのですから、もっと自分に自信をもっていきましょう！いろんなひとに話しかけてみるのもいいと思いますよ!",
    "AFGD": "物事を自分なりに理解して、ポジティブにとらえるのが得意なあなたは、麻酔科がおすすめです。立派な医師になれる素質があります。ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。酒々井にいるときは、部屋にこもりがちで、突発的にやりたいことをやる傾向にあるあなたは、自分の世界を大事にしつつも、もっと部屋のイベントや、酒々井の田んぼに散歩しに行くのがよいでしょう。星がきれいで気持ちいいですよ！あと、陰湿さも兼ね備えているので、ひとあたりは丁寧に!",
    "AFGH": "自分の世界を大切にしていて静かめなあなたは、皮膚科に向いています！立派な皮膚科医になれる素質があります。ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。一見すると、堂々として思慮深く思われるあなたは、実際のところ、ネガティブな感情に時々支配されてしまうようです。もう少し過ごしやすくするために、一日の計画を身近なお友達と過ごす時間を増やして立てて、いろんな人と交流しようと頑張ってみてください！では、今日は夜更かしをせず、明日に備えて！おやすみなさいzzz",
    "EBCD": "外交的でポジティブでありながら計画的な側面を持つあなたは放射線科がおすすめです！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。外交的でありながらも計画的なあなたはリーダーシップを発揮する才能が有ります。学校での生活だけでなく部活動や放課後の遊びでも仕切っているのではないでしょうか？あなたのようなタイプの人はなかなかいないのでとても重宝されています。後期もガンガン発揮していきましょう！！",
    "EBCH": "外交的で計画的、かつ慎重派なあなたは耳鼻咽喉科がおすすめです！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。あなた会話をしながら相手が何を言ってほしいことを推測し、言うことが出来るので、相手に好かれやすいです。あなたが前期で構築した信頼という土台の上で、後期は存分に暴れましょう！！",
    "EBGD": "外交的、直観的、ポジティブの三要素を併せ持ったあなたは、眼科に向いています！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。鋭い観察力をもったあなたは気配りができる人間です。素晴らしい素質ですが、たまに気疲れしてしまうことがあるのではないでしょうか？たまにはカラオケなどに行って気分をリフレッシュさせるのもよいかしれません。",
    "EBGH": "外交的で直観的なあなたは、産業医に向いています！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。あなたはいわゆるフッ軽と呼ばれる種族です。どんな遊びにも積極的に参加するあなたは自分の時間を作り出すのが苦手なのかもしれません。後期は夜寮の部屋で自分を見つめなおす時間を確保してみてもよいかもしれません。",
    "EFCD": "ポジティブでありながらも内向的な側面を併せ持つあなたは美容整形外科に向いています！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。前期だけではあなたの内に秘めた思いが周りの人に伝わっていないのではないでしょうか？後期は積極的に自分のことを話すようにしてみると、相手もさらにあなたに興味が湧くはずです！",
    "EFCH": "計画的で慎重派なあなたは産婦人科に向いています！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。常に三手先まで考えながら行動するあなたはとても素晴らしい能力を持っています。しかし内向的であるが故に、意外と周りの人が持っているあなたへのイメージは異なるかもしれません。後期は積極的によっ友などの絶妙な距離感の友達にも話しかけてみましょう。また、このJUTN診断で内科を進められた人と一緒にいると、とっても楽しい時間を過ごせるでしょう。",
    "EFGD": "内向的でありながらもポジティブなあなたは内科に向いています！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。おそらくあなたはすでに単位を落としていますよね？落としているのにも関わらず、「まあ何とかなるっしょ」とか言ってるはずです。後期はそんな甘くありません。勉強してください！また、このJUTN診断で産婦人科を進められた人に話しかけてみると、新しい考えに触れることができるでしょう。",
    "EFGH": "直観的で臨機応変に対応出来るあなたは精神科に向いています！ここで、あなたに後期の過ごし方のアドバイスを送らせていただきます。室内にいるのが好きなあなたは、冬になって寒くなるとますます部屋にこもってしまうでしょう。しかし外出することで生まれる縁もあります。友達にご飯などを誘われた際には積極的に行くようにしましょう！",
 
 };

const form = document.getElementById("quizForm");

// 質問を表示
questions.forEach((q, i) => {
  const div = document.createElement("div");
  div.className = "question";
  div.innerHTML = `<p>${q.question}</p>`;
  Object.entries(q.answers).forEach(([key, ans]) => {
    div.innerHTML += `
      <label>
        <input type="radio" name="q${i}" value="${key}" required>
        ${ans.text}
      </label><br>`;
  });
  form.insertBefore(div, form.lastElementChild);
});

// 診断ロジック
form.addEventListener("submit", function (e) {
  e.preventDefault();

  const scores = { A: 0, B: 0, C: 0, D: 0, E: 0, F: 0, G: 0, H: 0 };

  questions.forEach((q, i) => {
    const selected = form[`q${i}`].value;
    const scoreObj = q.answers[selected].score;
    for (const key in scoreObj) {
      scores[key] += scoreObj[key];
    }
  });

  const result =
    (scores.A >= scores.E ? "A" : "E") +
    (scores.B >= scores.F ? "B" : "F") +
    (scores.C >= scores.G ? "C" : "G") +
    (scores.D >= scores.H ? "D" : "H");

  const description = typeDescriptions[result] || "このタイプの解説は準備中です。";

  localStorage.setItem("result", result);
  localStorage.setItem("description", description);
  localStorage.setItem("scores", JSON.stringify(scores));

  window.location.href = "result.html";
});
